<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>KHO VIDEO 18 VIP</title>
<!-- SPLASH 18+ (đã chỉnh fit sát nội dung) -->
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }
    body {
        min-height: 100vh;
        background: #0a0a0a;
        color: #e0e0e0;
    }
    .splash-container {
    background: rgba(20, 20, 20, 0.94);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-radius: 24px;
    max-width: 360px;
    width: 92%;
    padding: 30px 20px 35px;          /* Giảm padding thêm */
    box-shadow: 0 20px 50px rgba(0,0,0,0.7);
    text-align: center;
    border: 1px solid #222;
    opacity: 0;
    transform: scale(0.92);
    animation: appear 1.2s cubic-bezier(0.34, 1.4, 0.64, 1) forwards;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.92); /* Sửa transform */
    z-index: 9999;
    max-height: 90vh;                 /* Giới hạn chiều cao tối đa */
    overflow-y: auto;                 /* Thêm cuộn nếu cần */
}

@keyframes appear {
    to { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1); /* Sửa transform */
    }
}
    
    .loader {
        position: relative;
        width: 90px;
        height: 90px;
        margin: 0 auto 20px;               /* GIẢM margin */
    }
    .spinner {
        width: 100%;
        height: 100%;
        border: 6px solid #222;
        border-top: 6px solid #ff4d4d;
        border-radius: 50%;
        animation: spin 1.1s cubic-bezier(0.5, 0, 0.5, 1) infinite;
    }
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    .plus18 {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        font-size: 38px;                    /* GIẢM nhẹ kích thước */
        font-weight: 900;
        color: #ff4d4d;
        text-shadow: 0 0 12px rgba(255,77,77,0.7);
        animation: fadeIn 2s ease-out forwards 0.6s;
    }
    @keyframes fadeIn {
        to { opacity: 1; }
    }
    .title {
        font-size: 22px;                    /* GIẢM nhẹ */
        font-weight: 800;
        letter-spacing: 2px;
        color: #ffffff;
        text-transform: uppercase;
        margin: 15px 0 30px;                /* GIẢM margin */
        text-shadow: 0 0 10px rgba(255,77,77,0.5);
    }
    .redirect-area {
        margin: 20px 0 15px;                /* GIẢM margin */
        opacity: 0;
        transition: opacity 0.9s ease;
    }
    .redirect-area.show {
        opacity: 1;
    }
    .btn-redirect {
        display: block;
        padding: 14px 50px;                 /* GIẢM padding nút */
        font-size: 16px;
        font-weight: 700;
        color: #ffffff;
        text-decoration: none;
        border-radius: 50px;
        cursor: pointer;
        margin: 10px auto;
        max-width: 280px;
        transition: all 0.35s ease;
        opacity: 0;
        transform: translateY(15px);
    }
    .btn-redirect.show {
        opacity: 1;
        transform: translateY(0);
    }
    .btn-primary {
        background: linear-gradient(145deg, #ff4d4d, #cc3700);
        box-shadow: 0 6px 20px rgba(255,77,77,0.45);
    }
    .btn-primary:hover {
        background: linear-gradient(145deg, #ff3333, #b32f00);
        box-shadow: 0 10px 30px rgba(255,51,51,0.55);
        transform: translateY(-4px);
    }
    .btn-secondary {
        background: #1a1a1a;
        border: 1px solid #444;
        color: #cccccc;
    }
    .btn-secondary:hover {
        background: #222;
        color: #ffffff;
        border-color: #666;
        transform: translateY(-3px);
    }
    .btn-redirect:active {
        transform: scale(0.96);
    }
    .footer {
        margin-top: 30px;                   /* GIẢM margin */
        font-size: 12px;
        color: #777;
    }
    .footer a {
        color: #ff4d4d;
        font-weight: 600;
        text-decoration: none;
    }
    .footer a:hover {
        text-decoration: underline;
    }
    .exit {
        opacity: 0 !important;
        transform: scale(1.45) !important;
    }
    #main-content { display: none; }
</style>
    <!-- CSS WIDGET CHÍNH -->
    <style>
        #navbar-iframe { display: none !important; }
        body { margin: 0 !important; padding: 20px !important; background-color: #1a1a1a; color: #e0e0e0; }
        .header, .sidebar, .footer, #header, #sidebar, #footer { display: none !important; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif !important; }

        .widget-container {
            max-width: 340px;
            margin: 30px auto;
            background: linear-gradient(145deg, #1c1c1c, #0d0d0d);
            border-radius: 18px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
            border: 1px solid #333;
        }
        .widget-title {
            font-family: 'Arial Black', sans-serif;
            font-size: 22px;
            font-weight: 900;
            color: #ff4d4d;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.8);
        }
        .group-card {
            background-color: #0a0a0a;
            border-radius: 12px;
            margin-bottom: 15px;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(255, 69, 0, 0.6), 0 0 25px rgba(255, 69, 0, 0.4);
            transition: transform 0.2s;
            position: relative;
        }
        .group-card:hover { transform: scale(1.02); }
        .group-card img {
            height: 150px;
            width: 100%;
            object-fit: cover;
            display: block;
        }
        .loading-bar-container {
            width: 100%;
            height: 6px;
            background-color: #333;
            position: absolute;
            bottom: 0;
            left: 0;
        }
        .loading-bar {
            height: 100%;
            background-color: #FFFFFF;
            width: 100%;
            animation: countdown 15s linear infinite;
        }
        @keyframes countdown {
            from { width: 100%; }
            to { width: 0%; }
        }
        /* Phần CSS còn lại của widget (giữ nguyên như bạn đã paste) */
        .join-button {
            display: block;
            padding: 12px;
            background-color: #FF4500;
            color: #fff;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 16px;
            margin-top: 20px;
            text-align: center;
            transition: background-color 0.2s, transform 0.2s;
            box-shadow: 0 4px 10px rgba(255, 69, 0, 0.4);
        }
        .join-button:active {
            background-color: #cc3700;
            transform: scale(0.98);
        }
        .member-notification {
            background-color: #2a2a2a;
            color: #d1d1d1;
            padding: 8px 15px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 13px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            min-height: 35px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .member-notification.show { opacity: 1; }
        .member-avatar {
            width: 28px;
            height: 28px;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            object-position: center;
            border-radius: 50%;
            margin-right: 8px;
            border: 1px solid #666666;
        }
        .telegram-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px auto;
            padding: 0 10px;
        }
        .telegram-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
            max-width: 48%;
            padding: 12px 16px;
            text-align: center;
            text-decoration: none;
            font-size: 13px;
            font-weight: bold;
            border-radius: 8px;
            background-color: #6c757d;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .telegram-button:hover { background-color: #5a6268; }
        .telegram-button::before {
            content: "";
            display: inline-block;
            width: 18px;
            height: 18px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.12.02-1.96 1.25-5.54 3.67-.52.36-.99.53-1.42.52-.47-.01-1.37-.26-2.03-.48-.82-.27-1.47-.42-1.42-.88.03-.24.37-.49 1.03-.74 4.04-1.76 6.73-2.92 8.08-3.49 3.85-1.61 4.65-1.89 5.17-1.9.11 0 .37.03.54.17.14.11.18.26.2.37.02.08.04.29.02.45z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            flex-shrink: 0;
        }
        .all-groups-container {
            max-width: 340px;
            margin: 30px auto;
            background: linear-gradient(145deg, #1c1c1c, #0d0d0d);
            border-radius: 18px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
            border: 1px solid #333;
        }
        .all-groups-title {
            font-family: 'Arial Black', sans-serif;
            font-size: 22px;
            font-weight: 900;
            color: #ff4d4d;
            margin-bottom: 25px;
            text-align: center;
            text-transform: uppercase;
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.8);
            border-bottom: 2px solid #ff4d4d;
            padding-bottom: 10px;
        }
        .group-list { display: flex; flex-direction: column; gap: 15px; }
        .group-item {
            background: linear-gradient(145deg, #0f0f0f, #0a0a0a);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid #333;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .group-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.15), 0 0 20px rgba(255, 255, 255, 0.1), 0 0 30px rgba(255, 255, 255, 0.05);
            border-color: #ff4d4d;
        }
        .group-item.active {
            background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
            border-color: #ff4d4d;
        }
        .group-item-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .group-name {
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            flex-grow: 1;
            padding-right: 15px;
        }
        .group-join-btn {
            background: linear-gradient(145deg, #FF4500, #cc3700);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            min-width: 80px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 69, 0, 0.3);
        }
        .group-join-btn:hover {
            background: linear-gradient(145deg, #ff5500, #dd4400);
            box-shadow: 0 6px 20px rgba(255, 69, 0, 0.4);
            transform: scale(1.05);
        }
        .recent-member {
            display: flex;
            align-items: center;
            background: rgba(20, 20, 20, 0.6);
            border-radius: 8px;
            padding: 8px 12px;
            border-left: 3px solid #ff4d4d;
            animation: fadeIn 0.5s ease;
            margin-top: 8px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .recent-member-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center;
            margin-right: 10px;
            border: 2px solid #ff4d4d;
            box-shadow: 0 0 8px rgba(255, 77, 77, 0.5);
        }
        .recent-member-info {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .recent-member-name { font-size: 13px; font-weight: normal; color: #fff; }
        .recent-member-status { font-size: 11px; color: #888; font-weight: normal; }
        .friend-btn-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease;
            opacity: 0;
            margin-top: 0;
        }
        .group-item.active .friend-btn-container {
            max-height: 60px;
            opacity: 1;
            margin-top: 10px;
        }
        .friend-btn {
            background: linear-gradient(145deg, #2196F3, #0d8bf2);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: block;
            text-align: center;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }
        .friend-btn:hover {
            background: linear-gradient(145deg, #42a5f5, #1e88e5);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
            transform: scale(1.02);
        }
        .friend-btn:active { transform: scale(0.98); }
        .notification-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 20, 20, 0.7);
            backdrop-filter: blur(12px);
            color: #f1f1f1;
            padding: 18px 24px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 12px 45px rgba(0, 0, 0, 0.55);
            z-index: 10000;
            text-align: center;
            font-size: 16px;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.35s ease-in-out;
            pointer-events: none;
            display: inline-block; 
            max-width: 90%;
        }
        .notification-popup.show { opacity: 1; }
        .notification-popup.hide { opacity: 0; }
        @media (max-width: 400px) {
            .widget-container, .all-groups-container { max-width: 320px; padding: 20px; margin: 20px auto; }
            .group-item-content { flex-direction: column; gap: 10px; align-items: flex-start; }
            .group-join-btn { width: 100%; margin-top: 10px; }
            .group-name { padding-right: 0; }
            .recent-member { padding: 10px; }
            .recent-member-avatar { width: 32px; height: 32px; }
        }
    </style>
</head>
<body>

<!-- SPLASH 18+ -->
<div class="splash-container" id="splash">
    <div class="loader">
        <div class="spinner"></div>
        <div class="plus18">18+</div>
    </div>
    <div class="title">KHO THƯ VIỆN SIÊU VIP </div>
    <div class="redirect-area" id="redirectArea">
        <a href="#" id="btnMain" class="btn-redirect btn-primary">ĐI ĐẾN</a>
        <a href="https://t.me/hackcamlensr" id="btnSecret" class="btn-redirect btn-secondary" target="_blank">HACK CAM LÉN</a>
    </div>
    <div class="footer">
        Liên hệ quảng cáo trên Telegram:<br>
        <a href="https://t.me/anyousc" target="_blank">@Anyousc</a>
    </div>
</div>

<!-- NỘI DUNG WIDGET -->
<div id="main-content">
    <div class="widget-container">
        <div class="widget-title" id="widgetTitle">TÊN NHÓM</div>
        <div id="groupContainer"></div>
        <div class="member-notification" id="memberNotification"></div>
        <div class="telegram-buttons">
            <a class="telegram-button" href="https://t.me/+PZiNXmR3bO85NWM1" target="_blank">KẾT BẠN</a>
            <a class="telegram-button" href="https://t.me/+thpSNHbUFN80NDI1" target="_blank">HẸN HÒ</a>
        </div>
    </div>

    <div class="all-groups-container">
        <div class="all-groups-title">DANH SÁCH NHÓM</div>
        <div class="group-list" id="allGroupsList"></div>
    </div>

    <div class="notification-popup" id="notificationPopup">
        Trang sẽ tự động chuyển hướng
    </div>
</div>

<!-- JAVASCRIPT -->
<script>
// SPLASH LOGIC
const splash = document.getElementById('splash');
const redirectArea = document.getElementById('redirectArea');
const btnMain = document.getElementById('btnMain');
const mainContent = document.getElementById('main-content');

setTimeout(() => {
    redirectArea.classList.add('show');
    setTimeout(() => {
        document.querySelectorAll('.btn-redirect').forEach(btn => btn.classList.add('show'));
    }, 200);

    setTimeout(() => {
        splash.classList.add('exit');
        setTimeout(() => {
            splash.style.display = 'none';
            mainContent.style.display = 'block';
            initWidget();
        }, 900);
    }, 15000);
}, 400);

btnMain.addEventListener('click', (e) => {
    e.preventDefault();
    splash.classList.add('exit');
    setTimeout(() => {
        splash.style.display = 'none';
        mainContent.style.display = 'block';
        initWidget();
    }, 900);
});

// === WIDGET DATA & LOGIC ===
const allGroupsData = [
    { name: "THÍCH LÁI MÁY BAY", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg0zHHca-hmkqPS0V8IRaGnBxfld9tXROxyhSaQt2_MNrQ4Rjjqdb_A2EGXjrghtaTlLlbJjczoraKETaMgEyU_GKiuMtVAIg1s-UnX4n_6J6cfoYXSxyUc74HBGrKx0AIId20MKr0peS2l7vBTM9S5qvoYtWHM9zI1ASxrMwGDqGYEgskScGprJEaeak4/s538/chbotrnnhanhvnucmchochng-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+qFItBMf26kc3ZmM9" },
    { name: "EM GÁI LOẠN LUÂN", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh5POD_Ar6hCEIqnmM9lqvub5WHulS_MLmtl9azWo7yTaCTXbc2s24MJCL251mhYeUxWmEv0j9QIUpdRJD3wSnSiHbnvzxr0QyKtaFXpcRfiHvcCChq9t05udJxoUZsz5TcHt9ttQvmRluGiMmBjPdIYXZP5CDwHMrhOnq-HRbF7suMSXbMBqjLqk-2DYw/s848/IMG_7182-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+llka_IjBcvZiOGE1" },
    { name: "TÌNH 1 ĐÊM", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjOwS8B7pBqrixlgikVaNXqGnAYQhvF-jK6ck_IhqGbAfA-GdpF9NAAJANnY6gn03e3ki-PBLkGeC8RBVKCm0ZHf2jeQhIqoELr-g_ldXGE75qG0wJzWefTZ2kqtaVhqeTrNiNpFdF2PwqCdhmj6kIQCeeIxnt0YmJRFawUXRuJOZxaboH2_sQRRw4ufWE/s848/IMG_7167-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+v8MyLMmUvVdjMzM9" },
    { name: "MÁY BAY MẸ VỢ", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhDBRCoIYBn7F-BQkIGY28qqj5S91Yo94EuLwWygY-BQ3TZdsAfYMY20yDh0ag0zA33j3SqcMky1eZrVO-yEz2QfyrSQcOUEUEQ4mbkFROSaFBkzKCG_ztxRKT_bV53O7b6jxxfe1Tx2re0xb1kjTGNFnsaCOa42P3NWFBuJLBelkwCmvXnATeDkr4ErwM/s1280/video_2025-10-01_18-55-43-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+8RWuLnsfQDs3MTA1" },
    { name: "MÁY BAY SIÊU DÂM", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiEdaoc0FXOtgsOIyRzG-wZPGnHYvjq5uCEAaa6TlTgaVMLeXPc9nUIgCJrNuMi4DZJN8DsiETZoXOkqSLkOJgerMtnFxH3McE57OR97IIA5QUrVzbIfGExlo3rZcJY0-x87FH83ixUcVw61MmFoN5bCoJoI67VzzmRbZ1pSzKVY7yODnq-uOmTaXrD7Sk/s1080/video_2025-09-26_18-54-40-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+qFItBMf26kc3ZmM9" },
    { name: "MÁY BAY HẠNG NẶNG", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiInqGmdYxohzrdppNhPG4y-6HlVDfIxsEBMqoFpR87f9Ks_ZRVSh0g8tsH9rQeIlM-tvKsg2ZVujVeyxi_VtqpifF0EBS0yFkTkTasQ8Gtgr_g5HkKH5hY1b1DP-5cc60lVW5ut1FFY5P701yW50z7WsVxrjijVW_5e50tNvOvaXCbaFySk0LZ8O39oP4/s640/video_2024-07-26_21-42-24-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+PmfPbrzlBiMxZGVl" },
    { name: "GÁI XINH BẠO DÂM", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjKT8i3ZmADme44-8CejaLFttBeQOYAPUY153k8hTIuhc7UX67-dxsifo0vNtAYZLgXtqfsQhGvcbTUo6kSyS0zaS72MjGfRJ6jW7h_gtP88AHRqQ492Ykh7ClSlAtvQ566VH-omce49vB7BxHOM-HRQ0d82VuuimbltSRciOYMhtX-jFV62nyRFO9M8ck/s848/video_2025-09-26_12-47-21-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+JBJWzWsFWCs1NDg1" },
    { name: "TÂM SỰ ĐÊM KHUYA", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgUjJP5FL5haIQijUhKXWQ9hrAqIWFLxJJFPWqI-IMfcmOCD5ZhyphenhyphenzziJ-jy17uZat-J6qLp_H4y1dSjfrZngRlZGC0lIx1TU0zSYe9VXtezoXVMijYXkhIDe0EeklcnFzPxotsDaaszE1Qm7VWKgnnxsOgqeT7BpalWhPGKsRDmwLJeTvSYfHvky-ttA1s/s800/IMG_0645-ezgif.com-video-to-gif-converter.gif", link: "https://t.me/+v1TfFJ9peX4wZGI1" },
];

const femaleNames = ["Vy", "Linh", "Nga", "Trang", "Nhi", "Thảo", "Hà", "Mi", "Mai", "Hương", "Yến", "Tú", "Oanh", "Hồng", "Giang", "Khánh Linh", "Lan", "Ngọc", "Quỳnh", "Uyên", "Tiên", "Trà My", "Ngọc Trâm", "Tố Như", "Bích", "Lan Anh", "Ngọc Anh", "Tú Trinh", "An Nhiên", "Thùy Linh", "@vybe_yeu", "@linhmoon_98", "@ngocanh_real", "@nhinguyen_03"];

const maleNames = ["Minh", "Quang", "Hải", "Nam", "Duy", "Khánh", "Hoàng", "Phúc", "Khoa", "Long", "Trọng", "Đạt", "Toàn", "Việt", "Tùng", "Lâm", "Tuấn", "Phong", "Cường", "Dũng", "Thiện", "Hữu", "Văn", "Thành", "Nhật", "@anhtrong_99", "@quangpro_vn", "@minhkhoa_vip"];

 const femaleAvatars = [
            "https://i.postimg.cc/GtGgQt3R/6104636064225413132-99.jpg",
            "https://i.postimg.cc/cCwkmC1n/6264935479346578537-99.jpg",
            "https://i.postimg.cc/PJYV4Jfm/6266929838820540259-99.jpg",
            "https://i.postimg.cc/MpVPJv17/100da3feda81c4e143a8a91240963596.jpg",
            "https://i.postimg.cc/HkXZ1VbM/15e06da381bd4365dfd6db4efeb68e44.jpg",
            "https://i.postimg.cc/wjLfY7DS/1921271665325e04e2a4eef681feb6fb.jpg",
            "https://i.postimg.cc/QxR4zpK5/1a3b67717235b4f8267cac9b74d88dc2.jpg",
            "https://i.postimg.cc/P5Y3nP13/36129e272e4b2db4f4ba1b65e2801893.jpg",
            "https://i.postimg.cc/8PqKYhfd/3e9e900ad55ddef5205aa189fff7b728.jpg",
            "https://i.postimg.cc/MpVPJv1g/438101279c6cbc015d939b47ba898d6c.jpg",
            "https://i.postimg.cc/J496FbHb/4cf539686bd21e9215c423a137732676.jpg",
            "https://i.postimg.cc/dtzHf8Z2/6c75e6bcb31a896e9757f4713c774496.jpg",
            "https://i.postimg.cc/L6rCWzgB/6e65c436943085aba9ebb60151d4b455.jpg",
            "https://i.postimg.cc/fRm2QJY9/6f1e5c35aa8d77a0adfc211d695e89ab.jpg",
            "https://i.postimg.cc/Qd14ZHcP/82719f49515e81558e18d74b637e981d.jpg",
            "https://i.postimg.cc/g28Sbn38/83b296a39b588029d8b13eee5f9b67fb.jpg",
            "https://i.postimg.cc/52L7W68n/8473adcb2db139d2fdc66cdfe67f7941.jpg",
            "https://i.postimg.cc/6pnjxyCz/901c4fe7f5fdaa1e9ff801b0f6e2c9a0.jpg",
            "https://i.postimg.cc/htTyRfVx/9aa04d31b2e09ce52fce589342cbd515.jpg",
            "https://i.postimg.cc/HkXZ1VQG/a23b1dd2e119ae63c9bf4238368c4ba1.jpg",
            "https://i.postimg.cc/jSPgYLzr/aa935940c2b2c7983279bfd2e680a1ef.jpg",
            "https://i.postimg.cc/SK4ZSkG1/ae17b882b104c3e8f1d25025b3c46698.jpg",
            "https://i.postimg.cc/tgbrqpzm/aeab1b14eab517aecee70410d1580bd7.jpg",
            "https://i.postimg.cc/q7rmJ4G5/b1014079091af88a7815830a6bcd72ad.jpg",
            "https://i.postimg.cc/3whL8YZz/ba082e45574ac77888a6455ca9e4c67c.jpg",
            "https://i.postimg.cc/QMD68hbL/c363bc5605ffc6e09651fcdd30b548be.jpg",
            "https://i.postimg.cc/Zqmfb4ct/d9902950c827433b3590e9256f65d346.jpg",
            "https://i.postimg.cc/1zSWmsH1/fb5b85c07a7cfed9eae29f566519cc4f.jpg"
        ];

 const maleAvatars = [
            "https://i.postimg.cc/rFdw8LnN/photo-2023-02-20-10-15-53.jpg",
            "https://i.postimg.cc/m202k6J7/photo-2024-06-15-21-41-43.jpg",
            "https://i.postimg.cc/CLWL56XG/photo-2025-03-20-17-55-27.jpg",
            "https://i.postimg.cc/T2CkqzcT/037598cab1dfc7fe94f8a5c2a3502ca1.jpg",
            "https://i.postimg.cc/NGpN73xc/341398c0dfe8ed9b55d1fa0fe8de7b05.jpg",
            "https://i.postimg.cc/sx6wjW2K/490f18bc41427a95dc2c1e9b56d0ee2f.jpg",
            "https://i.postimg.cc/SRTDS9K6/4dde0580bad54b459f57f01fd14d62fd.jpg",
            "https://i.postimg.cc/vTq3Ynm0/72b29e77cae81ae3c55d0d1aca84fbb7.jpg",
            "https://i.postimg.cc/Pf26zgMH/781e3908b7c79fb6499cc72d9447f144.jpg",
            "https://i.postimg.cc/5y7n4ztn/7b4d77048f5e8435a99b97453b3e1654.jpg",
            "https://i.postimg.cc/xjtsyw3h/8a94253df5e7a8209e6681d4c139ddf3.jpg",
            "https://i.postimg.cc/G3qMJWjL/ae235ab23ef84f2d131da0aff905748b.jpg",
            "https://i.postimg.cc/zD0dSskV/b4194e5641543171236be12abce5aa52.jpg",
            "https://i.postimg.cc/DfBCd9cW/d3f1f137b25ca3df0aa2c4debe35aa91.jpg",
            "https://i.postimg.cc/9XJxt6BR/e577ac6cda89eaa776cc20ce836db94d.jpg",
            "https://i.postimg.cc/L4NyBcVf/e80127fed7d8150aad67e534ef090675.jpg"
        ];

 const randomActions = [
            "Chào cậu! Xin làm quen, đừng ngại nhé", "Nhóm mình thiếu cậu, nay đủ rồi", "Tuyệt vời, tìm đúng người để thả thính", "Mình chờ cậu từ lâu lắm rồi đấy", "Tim mình có chỗ, cậu vào không", "Bạn đến đây vì muốn tìm ai", "Nụ cười cậu làm tim mình lạc nhịp", "Gu mình đấy, đừng đi đâu nhé", "Mãi mới thấy cậu xuất hiện ở đây", "Cậu có muốn làm người yêu mình", "Xin thông tin để chúng ta làm bạn", "Nhóm này tự dưng đáng yêu hơn", "Bạn có phép thuật làm mình mê", "Cậu là tia nắng giữa buổi đêm", "Ánh mắt ấy làm mình phải nhắn tin", "Mình đã thích cậu từ cái nhìn", "Mời cậu vào chỗ trống trong tim", "Đừng làm mình phải tán tỉnh nhiều", "Cậu nhìn xem, mình hợp nhau đấy", "Cậu độc thân à? Mình cũng thế", "Gửi cậu một cái ôm thật chặt", "Thả thính nhau, rồi yêu luôn nha", "Đón lấy trái tim mình đi nè", "Nhắn tin riêng cho mình đi nhé", "Cậu làm mình quên cả lối về", "Món quà tuyệt nhất là cậu đó", "Cậu là định mệnh của mình chưa", "Thời tiết hôm nay có cậu thật đẹp", "Chỉ muốn được ở gần bên cậu", "Vòng tay này chờ cậu đấy", "Mạnh dạn lên, tương lai có mình", "Chúng ta đi hẹn hò được không", "Vui vẻ nha, cậu tuyệt vời lắm", "Mình đã đổ cậu từ bao giờ", "Thương cậu rồi, cần gì cứ nói", "Cậu giống như nhân vật trong mơ", "Nhóm này có mình và cậu thôi", "Mê mẩn nụ cười rạng rỡ của cậu", "Làm quen nhau, biết đâu nên duyên", "Cần một bến đỗ là cậu đây", "Bây giờ cậu chọn mình hay ai", "Tự tin lên, cậu có mình rồi", "Chỉ muốn được cậu quan tâm thôi", "Đừng để mình phải chờ lâu nhé", "Hợp nhau rồi, sao chưa nói yêu", "Mê cậu quá, mình phải làm sao", "Gần lại đây, chuyện trò cùng mình", "Ngọt ngào như cậu ai mà chịu nổi", "Mình có duyên rồi đó nha", "Cậu giống như ánh trăng đêm nay", "Đón mình đi, mình chờ cậu rước", "Vô tình gặp cậu, cố ý làm quen", "Cá tính lắm, mình thích kiểu này", "Hứa nhé, yêu nhau rồi đừng bỏ", "Cậu chính là chân ái đời mình", "Bảo vệ cậu cả đời được không", "Tình cờ gặp cậu, yêu vội luôn", "Mình đã chuẩn bị mọi thứ rồi", "Cậu có muốn cùng mình đi chơi", "Thích làm người yêu mình không", "Đừng bận tâm ai kia, nhìn mình", "Bắt đầu thôi, trò chơi tình yêu", "Cậu là nguồn cảm hứng của mình", "Mãi mãi về sau có mình và cậu", "Ấm áp như cậu làm sao quên được", "Cậu làm mình muốn làm điều dại", "Giữ chặt lấy tay mình nhé", "Sưởi ấm đêm nay bằng tình yêu", "Cậu chính là ước mơ của mình", "Đơn giản là mình yêu cậu rồi", "Ngừng thở khi thấy cậu cười", "Thích cậu mất rồi, làm sao đây", "Vương vấn mãi nụ cười của cậu", "Mình có cần thêm ai nữa đâu", "Cậu là lý do mình vui vẻ", "Tâm sự với mình, đừng giấu nhé", "Chỉ muốn thấy cậu mỗi ngày", "Mình đang cần cậu ở bên", "Cậu là phiên bản hoàn hảo", "Tìm thấy cậu, thật may mắn", "Đợi cậu lâu lắm rồi đó", "Hãy nói cho mình điều cậu muốn", "Cậu là ngọn lửa trong tim", "Mãi là của nhau nhé", "Chỉ cần cậu là đủ rồi", "Yêu cậu nhất trên đời", "Nắm tay mình đi hết đường", "Cậu có phải thiên thần không", "Mình muốn cùng cậu xây nhà", "Thích cậu từ lâu rồi", "Cậu là tất cả của mình", "Bên nhau nha, đừng bỏ đi", "Cậu là ngôi sao sáng nhất", "Làm sao để cậu yêu mình", "Cậu có muốn mình hôn không", "Yêu cậu lắm, biết không", "Cậu là điều tuyệt vời nhất", "Chỉ cần cậu thôi, không ai", "Mình có thể tin cậu chứ", "Cậu làm mình hạnh phúc", "Không thể sống thiếu cậu", "Cậu ơi, yêu mình đi"
        ];

const RELOAD_INTERVAL = 5;
const MEMBER_CHANGE_INTERVAL = 5;
const MIN_TIMER = 5;
const MAX_TIMER = 10;

let maleIndex = 0;
let femaleIndex = 0;
let reloadTimer;
let memberTimer;
const groupTimers = {};
let activeGroupIndex = null;

const widgetTitle = document.getElementById('widgetTitle');
const groupContainer = document.getElementById('groupContainer');
const memberNotification = document.getElementById('memberNotification');
const allGroupsList = document.getElementById('allGroupsList');

function getRandomMember() {
    const isMale = Math.random() < 0.5;
    let name, avatarUrl;
    if (isMale) {
        name = maleNames[maleIndex % maleNames.length];
        avatarUrl = maleAvatars[maleIndex % maleAvatars.length];
        maleIndex++;
    } else {
        name = femaleNames[femaleIndex % femaleNames.length];
        avatarUrl = femaleAvatars[femaleIndex % femaleAvatars.length];
        femaleIndex++;
    }
    return { name, avatarUrl };
}

function getRandomTimeText() {
    const timeOptions = [
        { text: "vài giây trước", weight: 25 },
        { text: "vừa xong", weight: 20 },
        { text: "1 phút trước", weight: 18 },
        { text: "2 phút trước", weight: 15 },
        { text: "3 phút trước", weight: 12 },
        { text: "5 phút trước", weight: 10 },
        { text: "7 phút trước", weight: 8 },
        { text: "10 phút trước", weight: 6 },
        { text: "15 phút trước", weight: 5 },
        { text: "20 phút trước", weight: 4 },
        { text: "25 phút trước", weight: 3 },
        { text: "30 phút trước", weight: 3 },
        { text: "45 phút trước", weight: 2 },
        { text: "1 giờ trước", weight: 2 },
        { text: "1 giờ 30 phút trước", weight: 1 },
        { text: "2 giờ trước", weight: 1 },
        { text: "3 giờ trước", weight: 1 },
        { text: "4 giờ trước", weight: 1 },
        { text: "5 giờ trước", weight: 1 },
        { text: "6 giờ trước", weight: 1 },
        { text: "8 giờ trước", weight: 1 },
        { text: "10 giờ trước", weight: 1 },
        { text: "12 giờ trước", weight: 1 },
        { text: "hôm nay", weight: 1 },
        { text: "hôm qua", weight: 1 },
        { text: "2 ngày trước", weight: 1 },
        { text: "3 ngày trước", weight: 1 },
        { text: "tuần trước", weight: 1 }
    ];

    const totalWeight = timeOptions.reduce((sum, option) => sum + option.weight, 0);
    let random = Math.random() * totalWeight;

    for (let option of timeOptions) {
        if (random < option.weight) return option.text;
        random -= option.weight;
    }
    return "vài giây trước";
}

function createMemberHTML() {
    const member = getRandomMember();
    const timeText = getRandomTimeText();
    return `
        <div class="recent-member">
            <img src="${member.avatarUrl}" alt="Avatar" class="recent-member-avatar">
            <div class="recent-member-info">
                <div class="recent-member-name">${member.name}</div>
                <div class="recent-member-status">đang trong nhóm • ${timeText}</div>
            </div>
        </div>
    `;
}

function createFriendButtonHTML(groupLink) {
    return `
        <div class="friend-btn-container">
            <a href="${groupLink}" target="_blank" class="friend-btn">KẾT BẠN</a>
        </div>
    `;
}

function getRandomTimer() {
    return Math.floor(Math.random() * (MAX_TIMER - MIN_TIMER + 1)) + MIN_TIMER;
}

function updateGroupMember(groupIndex) {
    const groupItems = document.querySelectorAll('.group-item');
    if (groupItems[groupIndex]) {
        const groupItem = groupItems[groupIndex];
        let memberElement = groupItem.querySelector('.recent-member');
        
        if (!memberElement) {
            const memberHTML = createMemberHTML();
            groupItem.insertAdjacentHTML('beforeend', memberHTML);
        } else {
            memberElement.style.opacity = '0';
            setTimeout(() => {
                const newMemberHTML = createMemberHTML();
                memberElement.outerHTML = newMemberHTML;
                const newMember = groupItem.querySelector('.recent-member');
                newMember.style.opacity = '0';
                setTimeout(() => newMember.style.opacity = '1', 50);
            }, 300);
        }

        const nextTimer = getRandomTimer() * 1000;
        if (groupTimers[groupIndex]) clearTimeout(groupTimers[groupIndex]);
        groupTimers[groupIndex] = setTimeout(() => updateGroupMember(groupIndex), nextTimer);
    }
}

function initGroupTimers() {
    allGroupsData.forEach((_, index) => {
        const initialDelay = Math.random() * 3000;
        setTimeout(() => updateGroupMember(index), initialDelay);
    });
}

function handleGroupClick(index) {
    const groupItems = document.querySelectorAll('.group-item');
    if (activeGroupIndex === index) {
        groupItems[index].classList.remove('active');
        activeGroupIndex = null;
    } else {
        if (activeGroupIndex !== null) {
            groupItems[activeGroupIndex].classList.remove('active');
        }
        groupItems[index].classList.add('active');
        activeGroupIndex = index;
    }
}

function initGroupClickHandlers() {
    const groupItems = document.querySelectorAll('.group-item');
    groupItems.forEach((item, index) => {
        item.addEventListener('click', (e) => {
            if (!e.target.closest('.group-join-btn') && !e.target.closest('.friend-btn')) {
                handleGroupClick(index);
            }
        });
    });
}

function displayAllGroups() {
    let groupsHTML = '';
    allGroupsData.forEach((group, index) => {
        const member = getRandomMember();
        const timeText = getRandomTimeText();
        groupsHTML += `
            <div class="group-item" data-index="${index}">
                <div class="group-item-content">
                    <div class="group-name">${group.name}</div>
                    <a href="${group.link}" target="_blank" class="group-join-btn">VÀO</a>
                </div>
                <div class="recent-member">
                    <img src="${member.avatarUrl}" alt="Avatar" class="recent-member-avatar">
                    <div class="recent-member-info">
                        <div class="recent-member-name">${member.name}</div>
                        <div class="recent-member-status">đang trong nhóm • ${timeText}</div>
                    </div>
                </div>
                ${createFriendButtonHTML(group.link)}
            </div>
        `;
    });
    allGroupsList.innerHTML = groupsHTML;
    initGroupClickHandlers();
}

function showRandomGroup() {
    const randomIndex = Math.floor(Math.random() * allGroupsData.length);
    const group = allGroupsData[randomIndex];
    widgetTitle.textContent = group.name.toUpperCase();

    const groupHTML = `
        <div class="group-card">
            <div style="align-items: center; background-color: #000; display: flex; height: 150px; justify-content: center; overflow: hidden;">
                <img alt="Ảnh nhóm ${group.name}" src="${group.img}" />
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
            </div>
        </div>
        <a class="join-button" href="${group.link}" target="_blank">VÀO NHÓM</a>
    `;
    groupContainer.innerHTML = groupHTML;

    const loadingBar = document.querySelector('.loading-bar');
    if (loadingBar) {
        loadingBar.style.animation = 'none';
        loadingBar.offsetHeight;
        loadingBar.style.animation = `countdown ${RELOAD_INTERVAL}s linear`;
    }
}

function showMemberNotification() {
    memberNotification.classList.remove('show');
    setTimeout(() => {
        const isMale = Math.random() < 0.5;
        let name, avatarUrl;
        if (isMale) {
            name = maleNames[maleIndex % maleNames.length];
            avatarUrl = maleAvatars[maleIndex % maleAvatars.length];
            maleIndex++;
        } else {
            name = femaleNames[femaleIndex % femaleNames.length];
            avatarUrl = femaleAvatars[femaleIndex % femaleAvatars.length];
            femaleIndex++;
        }
        const action = randomActions[Math.floor(Math.random() * randomActions.length)];
        memberNotification.innerHTML = `
            <img src="${avatarUrl}" alt="Avatar" class="member-avatar" />
            ${name} vừa nhắn tin vào nhóm:
            <span style="display: block; font-weight: bold; color: white; margin-top: 3px;">
                ${action}
            </span>
        `;
        memberNotification.classList.add('show');
    }, 500);
}

function initWidget() {
    showRandomGroup();
    displayAllGroups();
    initGroupTimers();
    showMemberNotification();
    reloadTimer = setInterval(showRandomGroup, RELOAD_INTERVAL * 1000);
    memberTimer = setInterval(showMemberNotification, MEMBER_CHANGE_INTERVAL * 1000);
}

</script>
</body>
</html>
